{% extends 'layouts/main.html' %}
{% set title = "Check your answers" %}
{% set cdnumber = "XXX" %}
{% set _inError = data.validationError == "true"  %}

{% block pageTitle %}
{{title}}
{% endblock %}

{% block beforeContent %}

<div class="govuk-grid-row">

    <div class="govuk-grid-column-full">
        {% include data.version + "/_partials/logout.html" %}

        {{
 govukBackLink ({
                    text: 'Back',
                    href: 'javascript:history.back()'
                })
        }}

    </div>

</div>

{% endblock %}

{% block content %}

<div class="govuk-grid-row">

    <div class="govuk-grid-column-two-thirds">
        <span class="govuk-caption-l">Quarterly monitoring - pricing</span>
        <h1 class="govuk-heading-l">
            {{title}}
        </h1>

        <dl class="govuk-summary-list govuk-!-margin-bottom-9">

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Do you have the information you’ll need
                </dt>
                <dd class="govuk-summary-list__value">
                    {{data.mqpricinginitial}}
                </dd>
                <dd class="govuk-summary-list__actions">
                    <a class="govuk-link" href="initial">Change</a>
                </dd>
            </div>
 
            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Tariff list
                </dt>
                <dd class="govuk-summary-list__value">
                    {% for tariff in data.tariffsEntered %}
                    <strong>{{tariff.mqTariffName}}</strong>
                    {% if tariff.mqflatFees == "Yes" %}
                    <p class="govuk-body">
                        {{tariff.mqTariffType}}
                        <br>
                        Flat Fee: £{{tariff.mqflatFeestotal}} per day
                    </p>
                    {% else %}
                    <p class="govuk-body">
                        {{tariff.mqTariffType}}
                        <br>
                        Unit Rate: £{{tariff.mqUnitRate}} per kWh
                        <br>
                        Standing Charge: £{{tariff.mqStandingCharge}} per day
                    </p>
                    {% endif %}
                    {% endfor %}
                </dd>
                <dd class="govuk-summary-list__actions">
                    <a class="govuk-link" href="tariff-another">Change</a>
                </dd>
            </div>
           
            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Do your customers pay a connection charge
                </dt>
                <dd class="govuk-summary-list__value">
                    {{data.mqconnectionCharge}}
                </dd>
                <dd class="govuk-summary-list__actions">
                    <a class="govuk-link" href="connection-charge">Change</a>
                </dd>
            </div>

            {% if data.mqconnectionCharge == "Yes" %}
            
            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Connection list
                </dt>
                <dd class="govuk-summary-list__value">
                    {% for connectionEntry in data.allFlatConnectionFees %}
                    <strong>{{connectionEntry.mqConnectionName}}</strong>
                    <p class="govuk-body">
                        {{connectionEntry.mqConnectionType}}
                        <br>
                        £{{connectionEntry.mqFlatConnectionFee}} per customer
                    </p>
                    {% endfor %}
                </dd>
                <dd class="govuk-summary-list__actions">
                    <a class="govuk-link" href="connection-another">Change</a>
                </dd>
            </div>
            {% endif %}


            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Do your customers pay any other charges
                </dt>
                <dd class="govuk-summary-list__value">
                    {{data.mqOtherFees}}
                </dd>
                <dd class="govuk-summary-list__actions">
                    <a class="govuk-link" href="other-fees">Change</a>
                </dd>
            </div>

            {% if data.mqOtherFees == "Yes" %}
            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Customer charges
                </dt>
                <dd class="govuk-summary-list__value">
                    {% for charge in data.chargesEntered %}
                    <p class="govuk-body">
                        £{{charge.amount}}
                        <br>
                        {{charge.reason}}
                    </p>
                    {% endfor %}
                </dd>
                <dd class="govuk-summary-list__actions">
                    <a class="govuk-link" href="other-fees">Change</a>
                </dd>
            </div>
            {% endif %}



            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Total charges across all domestic customers
                </dt>
                <dd class="govuk-summary-list__value">
                    £{{data.mqtotalDomesticCosts}}
                </dd>
                <dd class="govuk-summary-list__actions">
                    <a class="govuk-link" href="total-domestic">Change</a>
                </dd>
            </div>

            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">
                    Total charges across all non-domestic customers 
                </dt>
                <dd class="govuk-summary-list__value">
                    £{{data.totalNonDomesticCosts}}
                </dd>
                <dd class="govuk-summary-list__actions">
                    <a class="govuk-link" href="total-non-domestic">Change</a>
                </dd>
            </div>

        </dl>
        <form method="POST" novalidate>
            <input type="hidden" id="mqpricingcomplete" name="mqpricingcomplete" value="true" />
            <input type="hidden" id="mqstatus" name="mqstatus" value="In progress" />
            <div class="govuk-button-group">
                {{
                govukButton ({
                    html: 'Save and continue'
                })
            }}
                <a href="/{{data.version}}/monitoring/quarterly-data/pricing/cancel?v={{data.lastpage}}"
                    class="govuk-link">Cancel</a>

            </div>
        </form>



    </div>

</div>

{% endblock %}